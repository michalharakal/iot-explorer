= Softwarearchitektur

Die Softwarearchitektur einer App trägt maßgeblich dazu, wie viel von dem in Kotlin geschriebenen Code wiederverwendet kann. Beim Entwurf einer Softwarearchitektur für ein Kotlin-Multiplatform-Projekt steht neben den üblichen nichtfunktionalen Anforderungen wie Lesbarkeit oder Wartbarkeit auch der hohe Grad an Wiederverwendbarkeit von Code im Vordergrund. Eine einmal programmierte Lösung spart nicht nur Aufwand nach dem DRY-Prinzip („Don’t Repeat Yourself“), sondern kann so auch eine höhere Qualität und fachliche Korrektheit durch mehrfaches Anwenden erreichen. Für die IoT Explorer App haben wir uns an eine stark an „Clean Architecture"<LINK 6> angelehnt und Ergebniss ist auf dem <BILD 3>. Die Tatsache, dass aus Sicht der Clean Architecture die UI Android Frameworks nur am Rande stehen und der Fokus auf Entities und Use Cases in der Domain liegt, macht es einfach, eine Umsetzung unabhängig von der Plattform zu gestalten.

== Kotlin multiplatform

.<BILD 3>
image::KMP_Architecture.png[]

Das Herzstück ist die CommonLib, die den Teil des Kodes beinhaltet, den man auf unterschiedlichen Platformen benutzt werden kann. Zusätzlich beinhaltet sie die tatsächliche Implementierung für native Code Teile, die nicht mit Kotlin umgesetzt werden können. Es steht auf soliden Grundlagen der Standard Bibliothek mit den Implementirugen für „kotlinx“-Serialisierung. Koroutinen werden zusätzlich zur Kotlin Standard Library mit FLow benutzt und in Abbildung 1 als ein wichtiger Baustein dargestellt.
Durch eine weitere Trennung der Implementierung, die sich um die Netzwerkkommunikation kümmert, und den Code, der für das Caching und die lokale Datenspeicherung zuständig ist, erzeugen wir zwar einen kleinen Mehraufwand (zum Beispiel bei den notwendigen ModelMappers), erreichen dafür allerdings die Freiheit, unterschiedliche Datenklassen für Netzwerk und Speicher zu nutzen. Dies wiederum ermöglicht eine Austauschbarkeit von Kommunikationsmodulen für unterschiedliche Protokolle mit unterschiedlichen Datentransfer-Objekten und Endpunkten.
